<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>BontiLand</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{--bg:#0a0a0f;--sur:#12121a;--sur2:#1a1a26;--bor:#2a2a3e;--acc:#6c63ff;--acc2:#ff6584;--acc3:#43e97b;--acc4:#f7971e;--txt:#e8e8f0;--mut:#8888aa;--r:14px;--rs:10px;--tabh:60px;--toph:52px}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html,body{height:100%;overflow:hidden;background:var(--bg);color:var(--txt);font-family:'DM Sans',sans-serif;font-size:14px}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse 60% 40% at 20% 10%,rgba(108,99,255,.12) 0%,transparent 60%),radial-gradient(ellipse 40% 30% at 80% 80%,rgba(255,101,132,.08) 0%,transparent 60%);pointer-events:none;z-index:0}

/* â”€â”€ APP SHELL â”€â”€ */
#app{position:relative;z-index:1;display:flex;flex-direction:column;height:100%;height:100dvh}

/* topbar - mobile only */
#topbar{height:var(--toph);min-height:var(--toph);background:var(--sur);border-bottom:1px solid var(--bor);display:flex;align-items:center;padding:0 14px;gap:10px;flex-shrink:0}
.tb-logo{font-family:'Syne',sans-serif;font-size:17px;font-weight:800;background:linear-gradient(135deg,var(--acc),var(--acc2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.tb-right{margin-left:auto;display:flex;align-items:center;gap:8px}
.tb-streak{font-size:13px}
.tb-level{background:rgba(108,99,255,.2);border:1px solid rgba(108,99,255,.3);border-radius:99px;padding:3px 9px;font-size:11px;color:var(--acc);font-family:'Syne',sans-serif;font-weight:700}
.tb-bar{width:60px;height:5px;background:var(--bor);border-radius:99px;overflow:hidden}
.tb-fill{height:100%;background:linear-gradient(90deg,var(--acc),var(--acc2));border-radius:99px;transition:width .5s}

/* scroll area */
#scroll{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;padding:14px 13px 16px}

/* bottom tabbar - mobile only */
#tabbar{height:var(--tabh);min-height:var(--tabh);background:var(--sur);border-top:1px solid var(--bor);display:flex;flex-shrink:0;padding-bottom:env(safe-area-inset-bottom)}
.tbtn{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1px;border:none;background:transparent;color:var(--mut);cursor:pointer;font-family:'DM Sans',sans-serif;font-size:9px;border-top:2px solid transparent;transition:all .15s;padding:0}
.tbtn.active{color:var(--acc);border-top-color:var(--acc);background:rgba(108,99,255,.07)}
.ticon{font-size:19px;line-height:1}

/* sidebar - desktop only, hidden by default */
#sidebar{display:none}

/* â”€â”€ DESKTOP â”€â”€ */
@media(min-width:700px){
  #app{flex-direction:row}
  #topbar,#tabbar{display:none}
  #sidebar{display:flex;flex-direction:column;width:210px;background:var(--sur);border-right:1px solid var(--bor);flex-shrink:0;padding:18px 0}
  .sl-logo{padding:0 18px 18px;border-bottom:1px solid var(--bor);margin-bottom:14px}
  .sl-logo h1{font-family:'Syne',sans-serif;font-size:19px;font-weight:800;background:linear-gradient(135deg,var(--acc),var(--acc2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
  .sl-logo p{font-size:11px;color:var(--mut);margin-top:2px}
  .sni{display:flex;align-items:center;gap:9px;padding:10px 18px;cursor:pointer;color:var(--mut);border-left:3px solid transparent;font-size:13px;transition:all .15s}
  .sni:hover{color:var(--txt);background:rgba(108,99,255,.06)}
  .sni.active{color:var(--acc);border-left-color:var(--acc);background:rgba(108,99,255,.1)}
  .sni-icon{font-size:15px;width:18px;text-align:center}
  .sb-bottom{margin-top:auto;padding:14px 18px;border-top:1px solid var(--bor)}
  .lvl-badge{display:inline-flex;align-items:center;gap:5px;background:rgba(108,99,255,.15);border:1px solid rgba(108,99,255,.25);border-radius:99px;padding:3px 9px;font-size:11px;color:var(--acc);font-family:'Syne',sans-serif;font-weight:700;margin-bottom:7px}
  .xp-row{display:flex;justify-content:space-between;font-size:11px;color:var(--mut);margin-bottom:5px}
  .xp-desk-track{height:5px;background:var(--bor);border-radius:99px;overflow:hidden}
  .xp-desk-fill{height:100%;background:linear-gradient(90deg,var(--acc),var(--acc2));border-radius:99px;transition:width .5s}
  #scroll{padding:26px 28px}
}

/* â”€â”€ PAGES â”€â”€ */
.page{display:none;animation:fi .22s ease}
.page.active{display:block}
@keyframes fi{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:none}}
.ph{margin-bottom:16px}
.ph h2{font-family:'Syne',sans-serif;font-size:21px;font-weight:800}
.ph p{color:var(--mut);font-size:12px;margin-top:2px}

/* â”€â”€ CARDS â”€â”€ */
.card{background:var(--sur);border:1px solid var(--bor);border-radius:var(--r);padding:15px;margin-bottom:13px}
.ctitle{font-family:'Syne',sans-serif;font-size:14px;font-weight:700;margin-bottom:11px;display:flex;align-items:center;gap:6px}
.dvd{height:1px;background:var(--bor);margin:13px 0}

/* â”€â”€ BUTTONS â”€â”€ */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:5px;padding:10px 16px;border-radius:var(--rs);font-family:'DM Sans',sans-serif;font-size:13px;font-weight:500;cursor:pointer;border:none;transition:all .15s;min-height:42px;line-height:1}
.bp{background:var(--acc);color:#fff}
.bg{background:transparent;color:var(--txt);border:1px solid var(--bor)}
.bs{background:var(--acc3);color:#000}
.bd{background:var(--acc2);color:#fff}
.bw{background:var(--acc4);color:#000}

/* â”€â”€ BADGES â”€â”€ */
.badge{display:inline-flex;align-items:center;padding:2px 8px;border-radius:99px;font-size:10px;font-weight:600}
.bpu{background:rgba(108,99,255,.2);color:var(--acc);border:1px solid rgba(108,99,255,.3)}
.bgr{background:rgba(67,233,123,.12);color:var(--acc3);border:1px solid rgba(67,233,123,.2)}
.bre{background:rgba(255,101,132,.12);color:var(--acc2);border:1px solid rgba(255,101,132,.2)}
.bor{background:rgba(247,151,30,.12);color:var(--acc4);border:1px solid rgba(247,151,30,.2)}

/* â”€â”€ HOME â”€â”€ */
.hgrid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:13px}
.scard{background:var(--sur);border:1px solid var(--bor);border-radius:var(--r);padding:13px;position:relative;overflow:hidden}
.scard::before{content:'';position:absolute;top:0;left:0;right:0;height:2px}
.scard.s1::before{background:linear-gradient(90deg,var(--acc),var(--acc2))}
.scard.s2::before{background:linear-gradient(90deg,var(--acc3),#38f9d7)}
.scard.s3::before{background:linear-gradient(90deg,var(--acc4),#f9d423)}
.scard.s4::before{background:linear-gradient(90deg,var(--acc2),#f093fb)}
.sv{font-family:'Syne',sans-serif;font-size:24px;font-weight:800}
.sl{font-size:11px;color:var(--mut);margin-top:2px}
.si{font-size:20px;position:absolute;right:11px;top:11px;opacity:.3}

.dmission{background:linear-gradient(135deg,rgba(108,99,255,.1),rgba(255,101,132,.06));border:1px solid rgba(108,99,255,.22);border-radius:var(--r);padding:14px;margin-bottom:13px}
.mh{display:flex;justify-content:space-between;align-items:center;margin-bottom:11px}
.mh h3{font-family:'Syne',sans-serif;font-size:14px;font-weight:700}
.mitems{display:grid;grid-template-columns:1fr 1fr;gap:7px}
.mitem{background:rgba(0,0,0,.22);border-radius:var(--rs);padding:9px 11px;display:flex;align-items:center;gap:7px;cursor:pointer;border:1px solid transparent;transition:all .15s}
.mitem:active{border-color:var(--acc);background:rgba(108,99,255,.1)}
.miico{font-size:17px}
.mitxt{font-size:11px;flex:1;line-height:1.3}
.mick{font-size:13px}

.hbot{display:grid;grid-template-columns:1fr 1fr;gap:11px}
@media(max-width:380px){.hbot{grid-template-columns:1fr}}
.sfire{font-size:32px;text-align:center;margin:5px 0}
.scnt{font-family:'Syne',sans-serif;font-size:32px;font-weight:800;text-align:center}
.slbl{text-align:center;color:var(--mut);font-size:11px}
.tipbox{background:rgba(67,233,123,.05);border:1px solid rgba(67,233,123,.16);border-radius:var(--rs);padding:10px 12px;font-size:12px;color:var(--mut);margin-bottom:12px;line-height:1.6}
.tipbox strong{color:var(--acc3)}

/* â”€â”€ SPEAKING â”€â”€ */
.ctabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:13px}
.ctab{padding:5px 11px;border-radius:99px;font-size:12px;cursor:pointer;border:1px solid var(--bor);color:var(--mut);transition:all .15s}
.ctab.active{background:var(--acc);border-color:var(--acc);color:#fff}

.pcard{background:var(--sur);border:1px solid var(--bor);border-radius:var(--r);padding:18px 15px;text-align:center;margin-bottom:13px}
.pen{font-family:'Syne',sans-serif;font-size:17px;font-weight:700;margin-bottom:5px;line-height:1.3}
.pph{color:var(--acc);font-size:12px;font-style:italic;margin-bottom:7px}
.pes{color:var(--mut);font-size:13px;margin-bottom:16px}
.sctrl{display:flex;gap:9px;justify-content:center;align-items:center;flex-wrap:wrap}
.recbtn{width:52px;height:52px;border-radius:50%;background:var(--acc2);border:none;cursor:pointer;font-size:21px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 4px 14px rgba(255,101,132,.3);transition:all .2s}
.recbtn.rec{animation:pulse 1s infinite;background:#e63946}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(230,57,70,.5)}50%{box-shadow:0 0 0 10px rgba(230,57,70,0)}}
.fb{background:var(--sur2);border-radius:var(--rs);padding:11px;margin-top:11px;font-size:13px;display:none;text-align:left}
.fb.show{display:block;animation:fi .22s}
.fb-g{border-left:3px solid var(--acc3)}
.fb-o{border-left:3px solid var(--acc4)}
.fb-r{border-left:3px solid var(--acc2)}

.pnav{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:13px}
.pnav .btn{flex:1;max-width:130px}

/* â”€â”€ SENTENCES â”€â”€ */
.wpool{display:flex;flex-wrap:wrap;gap:7px;padding:11px;background:var(--sur2);border-radius:var(--rs);min-height:48px;margin-bottom:9px}
.wslots{display:flex;flex-wrap:wrap;gap:7px;padding:11px;background:rgba(108,99,255,.04);border:2px dashed rgba(108,99,255,.22);border-radius:var(--rs);min-height:48px;margin-bottom:9px}
.wchip{padding:6px 12px;background:var(--sur);border:1px solid var(--bor);border-radius:99px;cursor:pointer;font-size:13px;transition:all .15s}
.wchip.used{opacity:.3;pointer-events:none}
.schip{padding:6px 12px;background:rgba(108,99,255,.11);border:1px solid rgba(108,99,255,.32);border-radius:99px;cursor:pointer;font-size:13px;color:var(--acc)}
.sres{padding:11px;border-radius:var(--rs);font-size:13px;font-weight:500;display:none;margin-top:9px}
.sres.ok{background:rgba(67,233,123,.07);border:1px solid rgba(67,233,123,.22);color:var(--acc3)}
.sres.no{background:rgba(255,101,132,.07);border:1px solid rgba(255,101,132,.22);color:var(--acc2)}
.gtip{background:rgba(108,99,255,.06);border:1px solid rgba(108,99,255,.16);border-radius:var(--rs);padding:11px;font-size:12px;color:var(--mut);margin-top:9px;display:none;line-height:1.6}
.gtip.show{display:block}
.gtip strong{color:var(--acc)}
.sbtns{display:flex;gap:7px;margin-top:13px;flex-wrap:wrap}
.sbtns .btn{flex:1;min-width:85px}

/* â”€â”€ VOCAB â”€â”€ */
.vpbar{background:var(--sur);border:1px solid var(--bor);border-radius:var(--r);padding:11px 14px;margin-bottom:9px;display:flex;align-items:center;gap:11px}
.vplbl{font-size:11px;color:var(--mut);min-width:38px}
.vptrack{flex:1;height:6px;background:var(--bor);border-radius:99px;overflow:hidden}
.vpfill{height:100%;border-radius:99px;transition:width .5s}
.vpcnt{font-family:'Syne',sans-serif;font-size:12px;font-weight:700;min-width:48px;text-align:right}

.fcwrap{perspective:1000px;margin-bottom:13px}
.fc{background:var(--sur);border:1px solid var(--bor);border-radius:var(--r);min-height:165px;cursor:pointer;transform-style:preserve-3d;transition:transform .42s;position:relative;display:flex;align-items:center;justify-content:center}
.fc.flipped{transform:rotateY(180deg)}
.fcf,.fcb{backface-visibility:hidden;position:absolute;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px}
.fcb{transform:rotateY(180deg)}
.fcw{font-family:'Syne',sans-serif;font-size:28px;font-weight:800}
.fcph{color:var(--acc);font-size:12px;margin-top:5px}
.fch{color:var(--mut);font-size:11px;margin-top:11px}
.fct{font-size:21px;font-weight:600;color:var(--acc3)}
.fce{color:var(--mut);font-size:12px;margin-top:9px;font-style:italic;text-align:center}

.vacts{display:flex;gap:7px;margin-bottom:14px}
.vacts .btn{flex:1;font-size:12px;padding:9px 5px;min-height:40px}

.wlist{display:grid;grid-template-columns:1fr 1fr;gap:7px}
.wli{background:var(--sur2);border:1px solid var(--bor);border-radius:var(--rs);padding:9px 11px;cursor:pointer;transition:border-color .15s}
.wli:active{border-color:var(--acc)}
.wli-en{font-weight:600;font-size:13px}
.wli-es{color:var(--mut);font-size:11px;margin-top:2px}
.wli-st{margin-top:4px}

/* â”€â”€ CONVERSATION â”€â”€ */
.sgrid{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;margin-bottom:13px}
.sbtn{background:var(--sur);border:1px solid var(--bor);border-radius:var(--r);padding:11px 7px;text-align:center;cursor:pointer;transition:all .15s}
.sbtn.active{border-color:var(--acc);background:rgba(108,99,255,.09)}
.sico{font-size:22px;margin-bottom:3px}
.snm{font-size:11px;font-weight:500}

.chatcard{background:var(--sur);border:1px solid var(--bor);border-radius:var(--r);overflow:hidden;margin-bottom:13px}
.chdr{background:var(--sur2);border-bottom:1px solid var(--bor);padding:11px 13px;display:flex;align-items:center;gap:9px}
.cava{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,var(--acc),var(--acc2));display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0}
.cname{font-weight:600;font-size:13px}
.cstat{font-size:10px;color:var(--acc3)}
.creset{margin-left:auto;background:transparent;border:1px solid var(--bor);border-radius:var(--rs);padding:5px 9px;color:var(--mut);font-size:11px;cursor:pointer}
.cmsgs{padding:13px;min-height:190px;max-height:260px;overflow-y:auto;display:flex;flex-direction:column;gap:9px}
.cmsg{max-width:86%}
.cmsg.bot{align-self:flex-start}
.cmsg.usr{align-self:flex-end}
.mbub{padding:8px 13px;border-radius:13px;font-size:13px;line-height:1.5}
.cmsg.bot .mbub{background:var(--sur2);border:1px solid var(--bor);border-bottom-left-radius:3px}
.cmsg.usr .mbub{background:var(--acc);color:#fff;border-bottom-right-radius:3px}
.mcorr{font-size:10px;color:var(--acc3);margin-top:3px;padding:0 3px}
.copts{display:flex;flex-wrap:wrap;gap:6px;padding:9px 13px;border-top:1px solid var(--bor)}
.copt{padding:7px 11px;background:rgba(108,99,255,.07);border:1px solid rgba(108,99,255,.22);border-radius:var(--rs);cursor:pointer;font-size:12px;line-height:1.4;transition:all .15s}
.copt:active{background:rgba(108,99,255,.18)}
.cinrow{display:flex;gap:7px;padding:9px 13px;border-top:1px solid var(--bor)}
.cin{flex:1;background:var(--sur2);border:1px solid var(--bor);border-radius:var(--rs);padding:8px 11px;color:var(--txt);font-family:'DM Sans',sans-serif;font-size:13px;outline:none;min-width:0}
.cin:focus{border-color:var(--acc)}
.cin::placeholder{color:var(--mut)}
.estate{text-align:center;padding:28px 14px;color:var(--mut)}
.esico{font-size:32px;margin-bottom:7px}

/* â”€â”€ PROGRESS â”€â”€ */
.trow{display:flex;gap:7px;flex-wrap:wrap}
.troph{background:var(--sur2);border:1px solid var(--bor);border-radius:var(--rs);padding:9px;text-align:center;flex:1;min-width:68px}
.troph.earned{border-color:var(--acc4);background:rgba(247,151,30,.07)}
.trico{font-size:21px;margin-bottom:2px}
.trnm{font-size:10px;color:var(--mut)}
.wgrid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
.wlbls{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-top:5px}
.wlbl{font-size:10px;color:var(--mut);text-align:center}
.dblk{aspect-ratio:1;background:var(--sur2);border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:10px;color:var(--mut)}
.dblk.done{background:rgba(108,99,255,.22);color:var(--acc)}
.dblk.today{background:var(--acc);color:#fff;font-weight:700}
.pgrid{display:grid;grid-template-columns:1fr 1fr;gap:11px;margin-bottom:13px}
@media(max-width:380px){.pgrid{grid-template-columns:1fr}}
.skrow{margin-bottom:11px}
.sknm{display:flex;justify-content:space-between;font-size:12px;margin-bottom:4px}
.sknm span:last-child{color:var(--mut)}
.skbar{height:6px;background:var(--bor);border-radius:99px;overflow:hidden}
.skfill{height:100%;border-radius:99px;transition:width 1s}
.flvls{display:flex;gap:6px;flex-wrap:wrap}
.flvl{padding:9px 12px;border-radius:var(--rs);background:var(--sur2);border:1px solid var(--bor);font-size:12px;flex:1;min-width:56px;text-align:center}
.flvl.cur{background:rgba(108,99,255,.16);border-color:var(--acc);color:var(--acc);font-weight:700}

/* â”€â”€ TOAST â”€â”€ */
#toastC{position:fixed;bottom:calc(var(--tabh) + 8px);right:10px;left:10px;z-index:9999;display:flex;flex-direction:column;gap:5px;pointer-events:none}
@media(min-width:700px){#toastC{bottom:14px;right:18px;left:auto;width:260px}}
.toast{background:var(--sur);border:1px solid var(--bor);border-radius:var(--rs);padding:9px 14px;font-size:12px;animation:su .25s ease;pointer-events:auto}
.toast.xp{border-left:3px solid var(--acc)}
.toast.ok{border-left:3px solid var(--acc3)}
@keyframes su{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

/* â”€â”€ WELCOME â”€â”€ */
#wov{position:fixed;inset:0;z-index:10000;background:rgba(5,5,10,.88);backdrop-filter:blur(10px);display:flex;align-items:flex-end;animation:fi .3s}
#wov.hide{animation:fo .32s forwards}
@keyframes fo{to{opacity:0;pointer-events:none}}
.wsheet{background:var(--sur);width:100%;max-height:93dvh;max-height:93vh;border-radius:18px 18px 0 0;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 -16px 50px rgba(0,0,0,.5)}
.wscroll{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch}
.whero{background:linear-gradient(135deg,#1a1630,#12121a,#1a1226);padding:22px 18px 15px;text-align:center;position:relative;overflow:hidden}
.whero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 70% 60% at 50% 0%,rgba(108,99,255,.18) 0%,transparent 70%)}
.wemo{font-size:44px;display:block;margin-bottom:9px;position:relative;z-index:1;animation:fl 3s ease-in-out infinite}
@keyframes fl{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}
.whero h2{font-family:'Syne',sans-serif;font-size:21px;font-weight:800;background:linear-gradient(135deg,#fff 30%,var(--acc));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;position:relative;z-index:1;margin-bottom:5px}
.whero p{color:var(--mut);font-size:12px;position:relative;z-index:1}
.wdots{display:flex;gap:5px;justify-content:center;padding:12px 18px 0}
.wdot{height:3px;width:8px;border-radius:99px;background:var(--bor);transition:all .3s}
.wdot.on{background:var(--acc);width:18px}
.wdot.dn{background:rgba(108,99,255,.32)}
.wstep{padding:15px 18px 9px;display:none;animation:stpi .22s}
.wstep.active{display:block}
@keyframes stpi{from{opacity:0;transform:translateX(14px)}to{opacity:1;transform:none}}
.wstep-ico{font-size:28px;margin-bottom:9px}
.wstep h3{font-family:'Syne',sans-serif;font-size:16px;font-weight:700;margin-bottom:5px}
.wstep p{color:var(--mut);font-size:13px;line-height:1.62}
.winput{width:100%;background:var(--sur2);border:1px solid var(--bor);border-radius:var(--rs);padding:10px 13px;color:var(--txt);font-family:'DM Sans',sans-serif;font-size:15px;outline:none;margin-top:11px;transition:border-color .2s}
.winput:focus{border-color:var(--acc)}
.winput::placeholder{color:var(--mut)}
.wgoals{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-top:11px}
.wgoal{padding:9px 11px;border-radius:var(--rs);background:var(--sur2);border:1px solid var(--bor);cursor:pointer;font-size:12px;transition:all .15s;display:flex;align-items:center;gap:6px;min-height:42px}
.wgoal.sel{background:rgba(108,99,255,.13);border-color:var(--acc);color:var(--acc)}
.wtimes{display:flex;flex-direction:column;gap:6px;margin-top:11px}
.wtime{padding:10px 13px;border-radius:var(--rs);background:var(--sur2);border:1px solid var(--bor);cursor:pointer;font-size:13px;transition:all .15s;display:flex;justify-content:space-between;align-items:center;min-height:46px}
.wtime.sel{background:rgba(108,99,255,.13);border-color:var(--acc);color:var(--acc)}
.wxplbl{font-size:11px;color:var(--acc3);white-space:nowrap}
.wfeats{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-top:11px}
.wfeat{background:var(--sur2);border:1px solid var(--bor);border-radius:var(--rs);padding:9px;font-size:12px;display:flex;align-items:center;gap:7px}
.wfeat-ico{font-size:17px;flex-shrink:0}
.wfoot{padding:11px 18px;padding-bottom:calc(11px + env(safe-area-inset-bottom));background:var(--sur);border-top:1px solid var(--bor);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}
.wskip{font-size:12px;color:var(--mut);cursor:pointer;padding:7px}
.wnext{padding:11px 24px;background:var(--acc);color:#fff;border:none;border-radius:var(--rs);cursor:pointer;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;min-height:44px;transition:all .15s}
.wnext.fin{background:linear-gradient(135deg,var(--acc),var(--acc2))}

@media(min-width:700px){
  #wov{align-items:center;justify-content:center}
  .wsheet{width:min(500px,calc(100vw - 36px));max-height:88vh;border-radius:18px}
  .whero{padding:32px 32px 20px}
  .wstep{padding:22px 32px 12px}
  .wfoot{padding:14px 32px 18px}
}

.conf{position:fixed;pointer-events:none;z-index:10001;border-radius:2px;animation:cfall linear forwards}
@keyframes cfall{0%{transform:translateY(-15px) rotate(0);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-thumb{background:var(--bor);border-radius:99px}
</style>
</head>
<body>
<div id="toastC"></div>

<!-- WELCOME OVERLAY -->
<div id="wov">
  <div class="wsheet">
    <div class="wscroll">
      <div class="whero">
        <span class="wemo" id="wemo">ğŸš€</span>
        <h2 id="wtitle">Bienvenido a BontiLand</h2>
        <p id="wsub">Tu plataforma personal para hablar inglÃ©s fluido</p>
      </div>
      <div class="wdots" id="wdots"></div>
      <div id="ws0" class="wstep active">
        <div class="wstep-ico">ğŸ‘‹</div>
        <h3>Â¡Hola! Vamos a conocernos</h3>
        <p>CuÃ©ntame sobre ti para personalizar tu experiencia de aprendizaje.</p>
        <input class="winput" id="wname" type="text" placeholder="Â¿CÃ³mo te llamas?" maxlength="30">
      </div>
      <div id="ws1" class="wstep">
        <div class="wstep-ico">ğŸ¯</div>
        <h3>Â¿CuÃ¡l es tu meta principal?</h3>
        <p>Selecciona lo que mÃ¡s te motiva.</p>
        <div class="wgoals">
          <div class="wgoal" onclick="wGoal(this,'trabajo')"><span>ğŸ’¼</span>Trabajo y negocios</div>
          <div class="wgoal" onclick="wGoal(this,'viajes')"><span>âœˆï¸</span>Viajar con confianza</div>
          <div class="wgoal" onclick="wGoal(this,'social')"><span>ğŸ—£ï¸</span>ConversaciÃ³n social</div>
          <div class="wgoal" onclick="wGoal(this,'general')"><span>ğŸŒ</span>InglÃ©s general</div>
        </div>
      </div>
      <div id="ws2" class="wstep">
        <div class="wstep-ico">â±ï¸</div>
        <h3>Â¿CuÃ¡nto tiempo por dÃ­a?</h3>
        <p>La constancia es mÃ¡s importante que la duraciÃ³n. Elige algo que puedas cumplir <em>todos los dÃ­as</em>.</p>
        <div class="wtimes">
          <div class="wtime" onclick="wTime(this,'10')"><span>âš¡ 10 minutos al dÃ­a</span><span class="wxplbl">+30 XP/dÃ­a</span></div>
          <div class="wtime sel" onclick="wTime(this,'20')"><span>ğŸ”¥ 20 minutos al dÃ­a <small style="color:var(--acc4)">(Recomendado)</small></span><span class="wxplbl">+60 XP/dÃ­a</span></div>
          <div class="wtime" onclick="wTime(this,'30')"><span>ğŸš€ 30+ minutos al dÃ­a</span><span class="wxplbl">+100 XP/dÃ­a</span></div>
        </div>
      </div>
      <div id="ws3" class="wstep">
        <div class="wstep-ico">ğŸ—ºï¸</div>
        <h3>Tu plataforma completa</h3>
        <p>5 mÃ³dulos con metodologÃ­a cientÃ­fica de adquisiciÃ³n de idiomas.</p>
        <div class="wfeats">
          <div class="wfeat"><span class="wfeat-ico">ğŸ¤</span><div><strong>Speaking</strong><br><span style="color:var(--mut);font-size:10px">Frases en voz alta</span></div></div>
          <div class="wfeat"><span class="wfeat-ico">ğŸ”¤</span><div><strong>Oraciones</strong><br><span style="color:var(--mut);font-size:10px">Estructura natural</span></div></div>
          <div class="wfeat"><span class="wfeat-ico">ğŸ“š</span><div><strong>Vocabulario</strong><br><span style="color:var(--mut);font-size:10px">RepeticiÃ³n espaciada</span></div></div>
          <div class="wfeat"><span class="wfeat-ico">ğŸ’¬</span><div><strong>ConversaciÃ³n</strong><br><span style="color:var(--mut);font-size:10px">Situaciones reales</span></div></div>
        </div>
      </div>
      <div id="ws4" class="wstep">
        <div class="wstep-ico">ğŸ†</div>
        <h3 id="wready">Â¡Todo listo!</h3>
        <p>Tu aventura empieza ahora. <strong style="color:var(--acc)">20 minutos al dÃ­a</strong> durante 90 dÃ­as transformarÃ¡n tu inglÃ©s completamente.</p>
        <div style="background:rgba(108,99,255,.07);border:1px solid rgba(108,99,255,.16);border-radius:var(--rs);padding:11px;margin-top:13px;font-size:12px;color:var(--mut);line-height:1.65">
          ğŸ’¡ <strong style="color:var(--txt)">Primera misiÃ³n:</strong> completa los 4 mÃ³dulos de hoy y gana tu primera racha ğŸ”¥
        </div>
      </div>
    </div>
    <div class="wfoot">
      <span class="wskip" onclick="skipW()">Saltar</span>
      <button class="wnext" id="wnext" onclick="wNext()">Comenzar â†’</button>
    </div>
  </div>
</div>

<!-- MAIN APP -->
<div id="app">
  <!-- sidebar desktop -->
  <div id="sidebar">
    <div class="sl-logo"><h1>BontiLand</h1><p>English Learning System</p></div>
    <nav>
      <div class="sni active" data-page="home"><span class="sni-icon">ğŸ </span>Inicio</div>
      <div class="sni" data-page="speaking"><span class="sni-icon">ğŸ¤</span>Speaking</div>
      <div class="sni" data-page="sentences"><span class="sni-icon">ğŸ”¤</span>Oraciones</div>
      <div class="sni" data-page="vocab"><span class="sni-icon">ğŸ“š</span>Vocabulario</div>
      <div class="sni" data-page="conversation"><span class="sni-icon">ğŸ’¬</span>ConversaciÃ³n</div>
      <div class="sni" data-page="progress"><span class="sni-icon">ğŸ“Š</span>Progreso</div>
    </nav>
    <div class="sb-bottom">
      <div class="lvl-badge"><span>âš¡</span><span id="dLevel">A2</span></div>
      <div class="xp-row"><span>XP</span><span id="dXpLbl">0/500</span></div>
      <div class="xp-desk-track"><div class="xp-desk-fill" id="dXpFill" style="width:0%"></div></div>
    </div>
  </div>

  <!-- mobile topbar -->
  <div id="topbar">
    <span class="tb-logo">BontiLand</span>
    <div class="tb-right">
      <span class="tb-streak" id="mStr">ğŸ”¥ 0</span>
      <span class="tb-level" id="mLvl">A2</span>
      <div class="tb-bar"><div class="tb-fill" id="mFill" style="width:0%"></div></div>
    </div>
  </div>

  <!-- scroll content -->
  <div id="scroll">

    <!-- HOME -->
    <div class="page active" id="page-home">
      <div class="ph"><h2>Â¡Hola! ğŸ‘‹</h2><p>Tu sesiÃ³n de hoy â€” 20 minutos para mejorar tu inglÃ©s</p></div>
      <div class="hgrid">
        <div class="scard s1"><div class="si">ğŸ”¥</div><div class="sv" id="stSt">0</div><div class="sl">DÃ­as seguidos</div></div>
        <div class="scard s2"><div class="si">âš¡</div><div class="sv" id="stXp">0</div><div class="sl">XP Total</div></div>
        <div class="scard s3"><div class="si">ğŸ“–</div><div class="sv" id="stWd">0</div><div class="sl">Palabras</div></div>
        <div class="scard s4"><div class="si">âœ…</div><div class="sv" id="stSe">0</div><div class="sl">Lecciones</div></div>
      </div>
      <div class="dmission">
        <div class="mh"><h3>ğŸ¯ MisiÃ³n de Hoy</h3><span class="badge bor">20 min</span></div>
        <div class="mitems">
          <div class="mitem" onclick="goP('speaking');markM(this)" data-m="speaking"><span class="miico">ğŸ¤</span><div class="mitxt">5 frases en voz alta</div><span class="mick">â—‹</span></div>
          <div class="mitem" onclick="goP('sentences');markM(this)" data-m="sentences"><span class="miico">ğŸ”¤</span><div class="mitxt">3 oraciones ordenadas</div><span class="mick">â—‹</span></div>
          <div class="mitem" onclick="goP('vocab');markM(this)" data-m="vocab"><span class="miico">ğŸ“š</span><div class="mitxt">10 flashcards</div><span class="mick">â—‹</span></div>
          <div class="mitem" onclick="goP('conversation');markM(this)" data-m="conversation"><span class="miico">ğŸ’¬</span><div class="mitxt">1 conversaciÃ³n</div><span class="mick">â—‹</span></div>
        </div>
      </div>
      <div class="hbot">
        <div class="card">
          <div class="ctitle">ğŸ”¥ Racha actual</div>
          <div class="sfire">ğŸ”¥</div><div class="scnt" id="stSt2">0</div><div class="slbl">dÃ­as consecutivos</div>
          <div class="dvd"></div>
          <p style="font-size:12px;color:var(--mut);text-align:center">Â¡Completa la misiÃ³n de hoy!</p>
        </div>
        <div class="card">
          <div class="ctitle">ğŸ’¡ Tip del dÃ­a</div>
          <div id="tipTxt" style="font-size:12px;line-height:1.65;color:var(--mut)"></div>
          <div class="dvd"></div>
          <div id="tipSrc" style="font-size:10px;color:var(--mut)"></div>
        </div>
      </div>
    </div>

    <!-- SPEAKING -->
    <div class="page" id="page-speaking">
      <div class="ph"><h2>ğŸ¤ Speaking</h2><p>Escucha â†’ Repite â†’ Domina</p></div>
      <div class="tipbox"><strong>ğŸ’¡ MÃ©todo:</strong> Repite en voz alta 3 veces. Tu cerebro crea conexiones neurales con la prÃ¡ctica oral.</div>
      <div class="ctabs" id="spTabs"></div>
      <div class="pcard">
        <div class="badge bpu" id="pCat" style="margin-bottom:11px"></div>
        <div class="pen" id="pEn"></div>
        <div class="pph" id="pPh"></div>
        <div class="pes" id="pEs"></div>
        <div class="sctrl">
          <button class="btn bg" onclick="spkPhrase()">ğŸ”Š Escuchar</button>
          <button class="recbtn" id="recBtn" onclick="togRec()">ğŸ¤</button>
          <button class="btn bg" onclick="markKnown()">âœ“ Lo domino</button>
        </div>
        <div class="fb" id="fbBox"></div>
      </div>
      <div class="pnav">
        <button class="btn bg" onclick="prevPhr()">â† Anterior</button>
        <span id="pCnt" style="font-size:12px;color:var(--mut)"></span>
        <button class="btn bp" onclick="nextPhr()">Siguiente â†’</button>
      </div>
      <div class="card"><div class="ctitle">ğŸ“ Error comÃºn</div><div id="spTip" style="font-size:13px;line-height:1.65;color:var(--mut)"></div></div>
    </div>

    <!-- SENTENCES -->
    <div class="page" id="page-sentences">
      <div class="ph"><h2>ğŸ”¤ Oraciones</h2><p>Ordena las palabras para formar oraciones correctas</p></div>
      <div class="tipbox"><strong>ğŸ’¡ Estructura:</strong> InglÃ©s siempre: <strong>Sujeto â†’ Verbo â†’ Objeto</strong>. Orden mÃ¡s rÃ­gido que en espaÃ±ol.</div>
      <div class="card">
        <div class="ctitle">Nivel: <span id="sLvl" class="badge bpu" style="margin-left:4px"></span></div>
        <div style="font-size:12px;color:var(--mut);margin-bottom:11px">Traduce: "<span id="sEs" style="color:var(--txt);font-style:italic"></span>"</div>
        <p style="font-size:11px;color:var(--mut);margin-bottom:5px">Palabras disponibles:</p>
        <div class="wpool" id="wPool"></div>
        <p style="font-size:11px;color:var(--mut);margin-bottom:5px">Tu oraciÃ³n (toca para quitar):</p>
        <div class="wslots" id="wSlots"></div>
        <div class="sres" id="sRes"></div>
        <div class="gtip" id="gTip"></div>
        <div class="sbtns">
          <button class="btn bp" onclick="chkSent()">Verificar âœ“</button>
          <button class="btn bg" onclick="clrSent()">Limpiar</button>
          <button class="btn bg" onclick="nxtSent()">Siguiente â†’</button>
        </div>
      </div>
      <div class="card">
        <div class="ctitle">ğŸ“Š Hoy</div>
        <div style="display:flex;gap:18px">
          <div style="text-align:center"><div class="sv" id="sCor" style="font-size:22px">0</div><div class="sl">Correctas</div></div>
          <div style="text-align:center"><div class="sv" id="sWrg" style="font-size:22px;color:var(--acc2)">0</div><div class="sl">Incorrectas</div></div>
          <div style="text-align:center"><div class="sv" id="sStr" style="font-size:22px;color:var(--acc4)">0</div><div class="sl">Racha</div></div>
        </div>
      </div>
    </div>

    <!-- VOCAB -->
    <div class="page" id="page-vocab">
      <div class="ph"><h2>ğŸ“š Vocabulario</h2><p>10-15 palabras diarias con repeticiÃ³n espaciada</p></div>
      <div class="vpbar"><span class="vplbl">Hoy</span><div class="vptrack"><div class="vpfill" id="vTFill" style="width:0%;background:linear-gradient(90deg,var(--acc),var(--acc2))"></div></div><span class="vpcnt" id="vTCnt">0/10</span></div>
      <div class="vpbar"><span class="vplbl">Total</span><div class="vptrack"><div class="vpfill" id="vAllFill" style="width:0%;background:linear-gradient(90deg,var(--acc3),#38f9d7)"></div></div><span class="vpcnt" id="vAllCnt">0</span></div>
      <div class="fcwrap">
        <div class="fc" id="fcard" onclick="flipFC()">
          <div class="fcf">
            <div class="fcw" id="fcW"></div>
            <div class="fcph" id="fcPh"></div>
            <div class="fch">ğŸ‘† Toca para ver la traducciÃ³n</div>
            <button class="btn bg" style="margin-top:11px;font-size:11px;min-height:36px" onclick="event.stopPropagation();spkWord()">ğŸ”Š Pronunciar</button>
          </div>
          <div class="fcb">
            <div class="fct" id="fcTr"></div>
            <div class="fce" id="fcEx"></div>
          </div>
        </div>
      </div>
      <div class="vacts">
        <button class="btn bd" onclick="rateW(1)">ğŸ˜• DifÃ­cil</button>
        <button class="btn bw" onclick="rateW(2)">ğŸ¤” Regular</button>
        <button class="btn bs" onclick="rateW(3)">ğŸ˜Š FÃ¡cil</button>
      </div>
      <div class="dvd"></div>
      <div style="font-family:'Syne',sans-serif;font-size:14px;font-weight:700;margin-bottom:9px">Palabras de hoy</div>
      <div class="wlist" id="wList"></div>
    </div>

    <!-- CONVERSATION -->
    <div class="page" id="page-conversation">
      <div class="ph"><h2>ğŸ’¬ ConversaciÃ³n</h2><p>Practica situaciones reales del mundo</p></div>
      <div class="sgrid" id="sGrid"></div>
      <div class="chatcard">
        <div class="chdr">
          <div class="cava" id="cAva">ğŸ’¬</div>
          <div><div class="cname" id="cName">Elige un escenario</div><div class="cstat">â— En lÃ­nea</div></div>
          <button class="creset" onclick="resetC()">â†º Reiniciar</button>
        </div>
        <div class="cmsgs" id="cMsgs"><div class="estate"><div class="esico">ğŸ’¬</div><p>Selecciona un escenario para comenzar</p></div></div>
        <div id="cOpts" class="copts"></div>
        <div class="cinrow">
          <input type="text" class="cin" id="cIn" placeholder="Escribe en inglÃ©s..." onkeydown="if(event.key==='Enter')sendC()">
          <button class="btn bp" style="padding:8px 13px;min-height:38px" onclick="sendC()">â†’</button>
        </div>
      </div>
    </div>

    <!-- PROGRESS -->
    <div class="page" id="page-progress">
      <div class="ph"><h2>ğŸ“Š Progreso</h2><p>Cada dÃ­a cuenta. Los pequeÃ±os avances crean fluencia real.</p></div>
      <div class="card"><div class="ctitle">ğŸ† Logros</div><div class="trow" id="tRow"></div></div>
      <div class="pgrid">
        <div class="card">
          <div class="ctitle">ğŸ“… Esta semana</div>
          <div class="wgrid" id="wGrd"></div>
          <div class="wlbls"><span class="wlbl">L</span><span class="wlbl">M</span><span class="wlbl">X</span><span class="wlbl">J</span><span class="wlbl">V</span><span class="wlbl">S</span><span class="wlbl">D</span></div>
        </div>
        <div class="card">
          <div class="ctitle">âš¡ XP semana</div>
          <div class="sv" id="wkXP" style="font-size:34px;text-align:center;margin:9px 0">0</div>
          <div style="text-align:center;color:var(--mut);font-size:12px">puntos ganados</div>
        </div>
      </div>
      <div class="card">
        <div class="ctitle">ğŸ’ª Habilidades</div>
        <div class="skrow"><div class="sknm"><span>Speaking</span><span id="skSp">0%</span></div><div class="skbar"><div class="skfill" id="sfSp" style="width:0%;background:linear-gradient(90deg,var(--acc),var(--acc2))"></div></div></div>
        <div class="skrow"><div class="sknm"><span>Vocabulario</span><span id="skVo">0%</span></div><div class="skbar"><div class="skfill" id="sfVo" style="width:0%;background:linear-gradient(90deg,var(--acc3),#38f9d7)"></div></div></div>
        <div class="skrow"><div class="sknm"><span>GramÃ¡tica</span><span id="skGr">0%</span></div><div class="skbar"><div class="skfill" id="sfGr" style="width:0%;background:linear-gradient(90deg,var(--acc4),#f9d423)"></div></div></div>
        <div class="skrow"><div class="sknm"><span>ComprensiÃ³n</span><span id="skLi">0%</span></div><div class="skbar"><div class="skfill" id="sfLi" style="width:0%;background:linear-gradient(90deg,var(--acc2),#f093fb)"></div></div></div>
      </div>
      <div class="card">
        <div class="ctitle">ğŸ—ºï¸ Nivel de Fluidez</div>
        <div class="flvls">
          <div class="flvl">A1<br><small style="color:var(--mut)">BÃ¡sico</small></div>
          <div class="flvl cur">A2 â¬…<br><small>TÃº aquÃ­</small></div>
          <div class="flvl">B1<br><small style="color:var(--mut)">Intermedio</small></div>
          <div class="flvl">B2<br><small style="color:var(--mut)">Avanzado</small></div>
        </div>
        <p style="font-size:11px;color:var(--mut);margin-top:9px">ğŸ¯ Necesitas 2000 XP para subir a B1</p>
      </div>
    </div>
  </div><!-- end scroll -->

  <!-- bottom tabbar -->
  <div id="tabbar">
    <button class="tbtn active" data-page="home"><span class="ticon">ğŸ </span>Inicio</button>
    <button class="tbtn" data-page="speaking"><span class="ticon">ğŸ¤</span>Speaking</button>
    <button class="tbtn" data-page="sentences"><span class="ticon">ğŸ”¤</span>Oraciones</button>
    <button class="tbtn" data-page="vocab"><span class="ticon">ğŸ“š</span>Vocab</button>
    <button class="tbtn" data-page="conversation"><span class="ticon">ğŸ’¬</span>Chat</button>
    <button class="tbtn" data-page="progress"><span class="ticon">ğŸ“Š</span>Progreso</button>
  </div>
</div>

<script>
// DATA
const PH={"Cotidiano":[{en:"What's up? How have you been?",es:"Â¿QuÃ© tal? Â¿CÃ³mo has estado?",ph:"/wÊŒts ÊŒp haÊŠ hÉ™v juË biËn/",tip:"âš ï¸ No digas 'How are you?' todo el tiempo. Los nativos dicen 'What's up?' o 'How's it going?'"},{en:"I'm running a bit late. Sorry about that.",es:"Voy un poco tarde. Lo siento.",ph:"/aÉªm rÊŒnÉªÅ‹ É™ bÉªt leÉªt/",tip:"âš ï¸ Error tÃ­pico: decir 'I am late'. Usa 'running late' cuando llegas tarde."},{en:"Could you say that again, please?",es:"Â¿Puedes repetirlo, por favor?",ph:"/kÊŠd juË seÉª Ã°Ã¦t É™ËˆÉ¡en/",tip:"âš ï¸ 'Repeat please' suena rudo. Usa 'Could you say that again?'"},{en:"I'm not sure I follow you.",es:"No estoy seguro de entenderte.",ph:"/aÉªm nÉ’t ÊƒÊŠÉ™r aÉª ËˆfÉ’loÊŠ juË/",tip:"ğŸ’¡ 'Follow' aquÃ­ significa entender el hilo de la conversaciÃ³n."},{en:"Let me think about it for a second.",es:"DÃ©jame pensarlo un momento.",ph:"/let miË Î¸ÉªÅ‹k É™ËˆbaÊŠt Éªt/",tip:"ğŸ’¡ Muy Ãºtil para ganar tiempo sin decir 'ummm'."}],"Negocios":[{en:"Let's get straight to the point.",es:"Vamos directo al grano.",ph:"/lets É¡et streÉªt tÉ™ Ã°É™ pÉ”Éªnt/",tip:"ğŸ’¡ Muy profesional en reuniones."},{en:"I'd like to follow up on our last meeting.",es:"Me gustarÃ­a hacer seguimiento de nuestra reuniÃ³n.",ph:"/aÉªd laÉªk tÉ™ ËˆfÉ’loÊŠ ÊŒp/",tip:"âš ï¸ 'Follow up' es esencial en negocios."},{en:"Can we schedule a call for later this week?",es:"Â¿Podemos programar una llamada esta semana?",ph:"/kÃ¦n wiË ËˆÊƒedjuËl É™ kÉ”Ël/",tip:"ğŸ’¡ 'Schedule' /ËˆÊƒedjuËl/ UK vs /ËˆskedjuËl/ USA."},{en:"I'll get back to you by end of day.",es:"Te respondo antes del final del dÃ­a.",ph:"/aÉªl É¡et bÃ¦k tÉ™ juË/",tip:"ğŸ’¡ EOD = End of Day. Muy usado en emails de negocios."}],"Viajes":[{en:"Where can I find the baggage claim?",es:"Â¿DÃ³nde estÃ¡ la recogida de maletas?",ph:"/weÉ™r kÃ¦n aÉª faÉªnd Ã°É™ bÃ¦É¡ÉªdÊ’ kleÉªm/",tip:"ğŸ’¡ 'Baggage claim' = recogida de equipaje. Â¡Esencial!"},{en:"I'd like a window seat, please.",es:"Quisiera un asiento de ventana.",ph:"/aÉªd laÉªk É™ ËˆwÉªndoÊŠ siËt/",tip:"âš ï¸ Window seat (ventana) vs aisle seat /aÉªl/ (pasillo)."},{en:"My flight got delayed. What are my options?",es:"Mi vuelo se retrasÃ³. Â¿CuÃ¡les son mis opciones?",ph:"/maÉª flaÉªt É¡É’t dÉªËˆleÉªd/",tip:"ğŸ’¡ 'Got delayed' es mÃ¡s natural que 'was delayed'."}],"Social":[{en:"That's a great point, actually.",es:"Ese es un buen punto, la verdad.",ph:"/Ã°Ã¦ts É™ É¡reÉªt pÉ”Éªnt ËˆÃ¦ktÊƒuÉ™li/",tip:"ğŸ’¡ 'Actually' â‰  'actualmente'. Â¡Falso amigo!"},{en:"I couldn't agree more.",es:"Estoy totalmente de acuerdo.",ph:"/aÉª ËˆkÊŠdnt É™ËˆÉ¡riË mÉ”Ër/",tip:"ğŸ’¡ MÃ¡s natural que 'I agree totally'."},{en:"No worries at all!",es:"Â¡No te preocupes para nada!",ph:"/noÊŠ ËˆwÉœËriz Ã¦t É”Ël/",tip:"ğŸ’¡ 'No worries' reemplaza 'You're welcome' en casual."}]};
const SN=[{words:["She","every","goes","to","morning","the","gym"],correct:["She","goes","to","the","gym","every","morning"],es:"Ella va al gimnasio todas las maÃ±anas.",gr:"Presente simple: Sujeto + Verbo(+s) + Complemento. Adverbio de frecuencia al final.",lv:"A2"},{words:["do","you","speak","Can","English?"],correct:["Can","you","speak","English?"],es:"Â¿Puedes hablar inglÃ©s?",gr:"Pregunta con modal: Can + Sujeto + Verbo. Sin 'do' con modales.",lv:"A1"},{words:["yesterday","working","was","he","all","day"],correct:["he","was","working","all","day","yesterday"],es:"Ã‰l estuvo trabajando todo el dÃ­a ayer.",gr:"Pasado continuo: Sujeto + was/were + Verbo-ing.",lv:"A2"},{words:["never","have","I","visited","Europe"],correct:["I","have","never","visited","Europe"],es:"Nunca he visitado Europa.",gr:"Presente perfecto: Sujeto + have + participio. 'Never' entre have y el participio.",lv:"B1"},{words:["coffee","I'd","like","some","please"],correct:["I'd","like","some","coffee","please"],es:"Me gustarÃ­a un poco de cafÃ©.",gr:"I'd like + artÃ­culo + sustantivo. MÃ¡s educado que 'I want'.",lv:"A1"}];
const VO=[{w:"Actually",ph:"/ËˆÃ¦ktÊƒuÉ™li/",tr:"En realidad / De hecho",ex:"Actually, I disagree with that idea."},{w:"Eventually",ph:"/ÉªËˆventÊƒuÉ™li/",tr:"Finalmente / Con el tiempo",ex:"Eventually, she learned to speak English."},{w:"Embarrassed",ph:"/ÉªmËˆbÃ¦rÉ™st/",tr:"Avergonzado/a",ex:"He was embarrassed when he forgot her name."},{w:"Overwhelmed",ph:"/ËŒoÊŠvÉ™rËˆwelmd/",tr:"Abrumado/a",ex:"She felt overwhelmed by all the work."},{w:"Get along",ph:"/É¡et É™ËˆlÉ’Å‹/",tr:"Llevarse bien",ex:"We get along really well."},{w:"Figure out",ph:"/ËˆfÉªÉ¡É™r aÊŠt/",tr:"Descubrir / Entender",ex:"I can't figure out this problem."},{w:"Look forward to",ph:"/lÊŠk ËˆfÉ”ËrwÉ™rd tuË/",tr:"Esperar con ansias",ex:"I look forward to meeting you."},{w:"Nevertheless",ph:"/ËŒnevÉ™rÃ°É™Ëˆles/",tr:"Sin embargo",ex:"It was raining; nevertheless, we went out."},{w:"Furthermore",ph:"/ËˆfÉœËrÃ°É™rmÉ”Ër/",tr:"AdemÃ¡s / Es mÃ¡s",ex:"Furthermore, this plan saves money."},{w:"Eager",ph:"/ËˆiËÉ¡É™r/",tr:"Con muchas ganas",ex:"She's eager to learn English."},{w:"Committed",ph:"/kÉ™ËˆmÉªtÉªd/",tr:"Comprometido/a",ex:"He's committed to his daily practice."},{w:"Straightforward",ph:"/ËŒstreÉªtËˆfÉ”ËrwÉ™rd/",tr:"Directo / Sencillo",ex:"The instructions were straightforward."}];
const SC={"âœˆï¸":{n:"Aeropuerto",s:[{b:"Welcome! Can I see your passport and ticket, please?",o:["Here you go. I have a flight to New York.","Yes, one moment please."]},{b:"Would you prefer a window or aisle seat?",o:["Window seat, please.","Aisle seat, I prefer more space."]},{b:"Any bags to check in?",o:["Yes, one suitcase.","No, just this carry-on."]},{b:"Gate B12. Boarding at 3:45 PM. Have a great flight!",o:["Thank you so much!","How do I get to gate B12?"]}]},"ğŸ›’":{n:"Tienda",s:[{b:"Hi! Can I help you find something?",o:["I'm looking for a blue jacket.","No thanks, just browsing."]},{b:"What's your budget?",o:["Around $50.","Price isn't a big concern."]},{b:"This is $45 and on sale. Try it on?",o:["Yes, where are the fitting rooms?","I'll take it without trying it on."]},{b:"Great choice! Cash or card?",o:["Card, please.","Cash, please."]}]},"ğŸ’¼":{n:"Negocios",s:[{b:"Good morning! Did you find the office okay?",o:["Yes, no problem. Nice to meet you.","Your Google Maps address was helpful."]},{b:"Tell me about your background.",o:["5 years in marketing, looking to expand.","I've been following your company closely."]},{b:"What's your biggest strength?",o:["I'm very organized and detail-oriented.","My communication skills are my strongest asset."]},{b:"We'll be in touch. Any questions?",o:["What does a typical day look like?","Thank you, I look forward to hearing from you."]}]},"ğŸ½ï¸":{n:"Restaurante",s:[{b:"Good evening! Do you have a reservation?",o:["Yes, under Garcia.","No, table for two please."]},{b:"Can I start you with drinks?",o:["Water for the table, please.","I'll have a sparkling water."]},{b:"Ready to order?",o:["I'll have the grilled salmon.","What do you recommend?"]},{b:"Any allergies?",o:["No, I'm good, thanks.","I have a nut allergy."]}]},"ğŸ“±":{n:"Casual",s:[{b:"Hey! Long time no see! How have you been?",o:["I've been great! Super busy though.","Pretty good! A lot has changed actually."]},{b:"Any plans for the weekend?",o:["Going hiking. You?","Just relaxing at home."]},{b:"We should hang out soon!",o:["Totally! Let's make plans.","I'll text you this week!"]}]}};
const TPS=[{t:"No esperes a ser perfecto para hablar. Cada error es informaciÃ³n valiosa.",s:"Input Comprensible â€” Krashen"},{t:"Escucha podcasts en inglÃ©s aunque no entiendas todo. Tu cerebro aprende patrones auditivos sin esfuerzo consciente.",s:"TeorÃ­a de AdquisiciÃ³n â€” Krashen (1982)"},{t:"Aprende frases completas, no palabras sueltas. 'I'm looking forward to it' es mÃ¡s Ãºtil que memorizar 'forward' aislado.",s:"Enfoque LÃ©xico â€” Michael Lewis (1993)"},{t:"La repeticiÃ³n espaciada es la forma mÃ¡s eficiente de memorizar. Mejor 5 min cada dÃ­a que 1 hora semanal.",s:"Efecto de Espaciado â€” Ebbinghaus (1885)"},{t:"Habla solo en inglÃ©s mientras cocinas o caminas. Este 'self-talk' conecta pensamiento y lenguaje.",s:"Output Hypothesis â€” Swain (1985)"}];
const TR=[{i:"ğŸŒŸ",n:"Primera vez",xp:0},{i:"ğŸ”¥",n:"3 dÃ­as",st:3},{i:"ğŸ’ª",n:"50 XP",xp:50},{i:"ğŸ“š",n:"10 palabras",wd:10},{i:"ğŸ¤",n:"5 frases",ph:5},{i:"âš¡",n:"200 XP",xp:200},{i:"ğŸ†",n:"7 dÃ­as",st:7},{i:"ğŸš€",n:"500 XP",xp:500}];

// STATE
let S=JSON.parse(localStorage.getItem('ff3')||'{}');
S=Object.assign({xp:0,streak:0,sessions:0,words:0,phrases:0,grammar:0,listen:0,wa:{},vr:{},pi:0,pc:"Cotidiano",vi:0,vrev:0,sc:0,sw:0,ss:0,si:0,wxp:0,ms:{},done:false},S);
const sv=()=>localStorage.setItem('ff3',JSON.stringify(S));
const q=s=>document.querySelector(s);
const qa=s=>document.querySelectorAll(s);

function addXP(n,l){S.xp+=n;S.wxp=(S.wxp||0)+n;sv();bars();toast('+'+n+' XP â€” '+l,'xp');stats()}

function bars(){
  const per=500,cur=S.xp%per,lv=Math.floor(S.xp/per);
  const lvs=['A1','A2','B1','B2','C1','C2'],ln=lvs[Math.min(lv,5)];
  const p=(cur/per*100)+'%';
  q('#mFill').style.width=p;q('#mLvl').textContent=ln;q('#mStr').textContent='ğŸ”¥ '+S.streak;
  q('#dXpFill').style.width=p;q('#dXpLbl').textContent=cur+'/'+per;q('#dLevel').textContent=ln;
}

function stats(){
  q('#stSt').textContent=S.streak;q('#stSt2').textContent=S.streak;
  q('#stXp').textContent=S.xp;q('#stWd').textContent=S.words;
  q('#stSe').textContent=S.sessions;q('#wkXP').textContent=S.wxp||0;
  const sp=Math.min(100,S.phrases*3),vo=Math.min(100,S.words*2),gr=Math.min(100,S.grammar*5),li=Math.min(100,S.listen*2);
  [['Sp',sp],['Vo',vo],['Gr',gr],['Li',li]].forEach(([k,v])=>{
    const f=q('#sf'+k),s=q('#sk'+k);
    if(f)f.style.width=v+'%';if(s)s.textContent=v+'%';
  });
}

// NAV
function goP(pg){
  qa('.page').forEach(p=>p.classList.remove('active'));
  qa('.tbtn,.sni').forEach(b=>b.classList.remove('active'));
  q('#page-'+pg).classList.add('active');
  qa('[data-page="'+pg+'"]').forEach(b=>b.classList.add('active'));
  q('#scroll').scrollTop=0;
  if(pg==='speaking')rSp();
  if(pg==='vocab')rVo();
  if(pg==='sentences')rSn();
  if(pg==='progress')rPr();
}
qa('.tbtn,.sni').forEach(b=>b.addEventListener('click',()=>goP(b.dataset.page)));

// TOAST
function toast(msg,type){
  const t=document.createElement('div');t.className='toast '+type;t.textContent=msg;
  q('#toastC').appendChild(t);setTimeout(()=>t.remove(),3000);
}

// HOME
function initH(){
  const tp=TPS[Math.floor(Math.random()*TPS.length)];
  q('#tipTxt').textContent=tp.t;q('#tipSrc').textContent=tp.s;
  stats();bars();
  Object.keys(S.ms||{}).forEach(m=>{
    const el=q('[data-m="'+m+'"]');
    if(el){el.classList.add('done');el.querySelector('.mick').textContent='âœ…'}
  });
}
function markM(el){
  const m=el.dataset.m;
  if(!S.ms[m]){
    S.ms[m]=true;el.classList.add('done');el.querySelector('.mick').textContent='âœ…';sv();
    if(Object.keys(S.ms).length>=4){
      setTimeout(()=>toast('ğŸ‰ Â¡MisiÃ³n completa! Racha +1 ğŸ”¥','ok'),300);
      S.streak++;S.sessions++;S.wa[new Date().toDateString()]=true;sv();stats();bars();
    }
  }
}

// SPEAKING
function rSp(){
  const el=q('#spTabs');el.innerHTML='';
  Object.keys(PH).forEach(c=>{
    const t=document.createElement('div');t.className='ctab'+(c===S.pc?' active':'');
    t.textContent=c;t.onclick=()=>{S.pc=c;S.pi=0;rSp()};el.appendChild(t);
  });
  uPhr();
}
function uPhr(){
  const ps=PH[S.pc],p=ps[S.pi];
  q('#pCat').textContent=S.pc;q('#pEn').textContent=p.en;q('#pPh').textContent=p.ph;q('#pEs').textContent=p.es;
  q('#pCnt').textContent=(S.pi+1)+' / '+ps.length;q('#spTip').textContent=p.tip;
  q('#fbBox').className='fb';
}
function prevPhr(){const l=PH[S.pc].length;S.pi=(S.pi-1+l)%l;uPhr()}
function nextPhr(){const l=PH[S.pc].length;S.pi=(S.pi+1)%l;uPhr();S.listen++;sv()}
function spkPhrase(){
  const p=PH[S.pc][S.pi];
  if('speechSynthesis' in window){const u=new SpeechSynthesisUtterance(p.en);u.lang='en-US';u.rate=0.85;speechSynthesis.speak(u);S.listen++;addXP(2,'Escuchaste pronunciaciÃ³n')}
}
let isRec=false,rec=null;
function togRec(){isRec?stopR():startR()}
function startR(){
  const btn=q('#recBtn');
  if(window.SpeechRecognition||window.webkitSpeechRecognition){
    const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
    rec=new SR();rec.lang='en-US';rec.interimResults=false;
    rec.onresult=e=>{
      const said=e.results[0][0].transcript.toLowerCase();
      const tgt=PH[S.pc][S.pi].en.toLowerCase();
      const tw=tgt.replace(/[^a-z\s]/g,'').split(' ');
      const sw=said.replace(/[^a-z\s]/g,'').split(' ');
      const sc=tw.filter(w=>sw.includes(w)).length/tw.length;
      if(sc>.7){fb('âœ… Â¡Muy bien! ReconocÃ­: "'+said+'"','g');addXP(10,'Speaking correcto');S.phrases++;}
      else if(sc>.4){fb('ğŸ¤” EscuchÃ©: "'+said+'". Intenta mÃ¡s claro.','o');addXP(3,'Speaking parcial');}
      else{fb('ğŸ” EscuchÃ©: "'+said+'". Frase: "'+PH[S.pc][S.pi].en+'"','r');}
      sv();
    };
    rec.onerror=()=>fb('No pude escuchar. Intenta de nuevo.','r');
    rec.onend=()=>{isRec=false;btn.classList.remove('rec');btn.textContent='ğŸ¤'};
    rec.start();isRec=true;btn.classList.add('rec');btn.textContent='â¹ï¸';
  } else {
    const ms=["Â¡Excelente pronunciaciÃ³n!","Bien, practica el ritmo.","Muy bien. Sigue asÃ­."];
    fb(ms[Math.floor(Math.random()*3)],'o');addXP(5,'Speaking practicado');S.phrases++;sv();
  }
}
function stopR(){if(rec)rec.stop()}
function fb(txt,t){const f=q('#fbBox');f.textContent=txt;f.className='fb show fb-'+t}
function markKnown(){S.phrases++;addXP(5,'Frase dominada');fb('âœ… Â¡Dominada! Sigue practicando.','g');sv();setTimeout(nextPhr,900)}

// SENTENCES
let cSn=null,cSel=[];
function rSn(){
  cSn=SN[S.si%SN.length];cSel=[];
  q('#sLvl').textContent=cSn.lv;q('#sEs').textContent=cSn.es;
  q('#sCor').textContent=S.sc;q('#sWrg').textContent=S.sw;q('#sStr').textContent=S.ss;
  q('#sRes').style.display='none';q('#gTip').classList.remove('show');
  const pool=q('#wPool'),slots=q('#wSlots');pool.innerHTML='';slots.innerHTML='';
  [...cSn.words].sort(()=>Math.random()-.5).forEach(w=>{
    const c=document.createElement('div');c.className='wchip';c.textContent=w;
    c.onclick=()=>selW(c,w);pool.appendChild(c);
  });
}
function selW(chip,w){
  if(chip.classList.contains('used'))return;
  chip.classList.add('used');cSel.push(w);
  const s=document.createElement('div');s.className='schip';s.textContent=w;
  s.onclick=()=>{cSel.splice(cSel.lastIndexOf(w),1);s.remove();chip.classList.remove('used')};
  q('#wSlots').appendChild(s);
}
function clrSent(){cSel=[];q('#wSlots').innerHTML='';qa('.wchip').forEach(c=>c.classList.remove('used'));q('#sRes').style.display='none';q('#gTip').classList.remove('show')}
function chkSent(){
  if(!cSel.length){toast('Agrega palabras primero','xp');return}
  const ok=cSn.correct.join(' ').toLowerCase()===cSel.join(' ').toLowerCase();
  const r=q('#sRes');
  r.className='sres '+(ok?'ok':'no');
  r.textContent=ok?'âœ… Â¡Correcto! '+cSn.correct.join(' '):'âŒ La respuesta es: "'+cSn.correct.join(' ')+'"';
  r.style.display='block';
  const gt=q('#gTip');gt.innerHTML='<strong>ğŸ“Œ Estructura:</strong> '+cSn.gr;gt.classList.add('show');
  if(ok){S.sc++;S.ss++;S.grammar++;addXP(15,'OraciÃ³n correcta');setTimeout(nxtSent,1800)}
  else{S.sw++;S.ss=0}
  sv();q('#sCor').textContent=S.sc;q('#sWrg').textContent=S.sw;q('#sStr').textContent=S.ss;
}
function nxtSent(){S.si=(S.si+1)%SN.length;sv();rSn()}

// VOCAB
function rVo(){uFC();rWL();uVP()}
function uFC(){
  const w=VO[S.vi%VO.length];
  q('#fcW').textContent=w.w;q('#fcPh').textContent=w.ph;q('#fcTr').textContent=w.tr;q('#fcEx').textContent='"'+w.ex+'"';
  q('#fcard').classList.remove('flipped');
}
function flipFC(){q('#fcard').classList.toggle('flipped')}
function spkWord(){
  const w=VO[S.vi%VO.length];
  if('speechSynthesis' in window){const u=new SpeechSynthesisUtterance(w.w);u.lang='en-US';u.rate=0.85;speechSynthesis.speak(u)}
}
function rateW(r){
  const w=VO[S.vi%VO.length];S.vr[w.w]=r;
  if(r>=2)S.words=Math.max(S.words,Object.values(S.vr).filter(x=>x>=2).length);
  S.vi++;S.vrev++;
  addXP(r*3,['','âš¡ Para repasar','ğŸ‘ Buen progreso','ğŸš€ Dominada'][r]);
  sv();uFC();rWL();uVP();
}
function uVP(){
  const rv=S.vrev%VO.length;
  q('#vTFill').style.width=Math.min(100,rv/10*100)+'%';q('#vTCnt').textContent=Math.min(rv,10)+'/10';
  q('#vAllFill').style.width=Math.min(100,S.words/VO.length*100)+'%';q('#vAllCnt').textContent=S.words+' palabras';
}
function rWL(){
  const list=q('#wList');list.innerHTML='';
  VO.forEach(w=>{
    const r=S.vr[w.w]||0;
    const d=document.createElement('div');d.className='wli';
    const bdgs=['<span class="badge bpu">Por revisar</span>','<span class="badge bre">DifÃ­cil</span>','<span class="badge bor">Regular</span>','<span class="badge bgr">Dominada</span>'];
    d.innerHTML='<div class="wli-en">'+w.w+'</div><div class="wli-es">'+w.tr+'</div><div class="wli-st">'+bdgs[r]+'</div>';
    d.onclick=()=>{S.vi=VO.indexOf(w);uFC()};list.appendChild(d);
  });
}

// CONVERSATION
let curSc=null,curSt=0;
const BAD={'i want':"ğŸ’¡ 'I want' suena rudo. Prueba 'I\\'d like'",'i am agree':"âŒ Se dice 'I agree', sin 'am'",'how i can':"âŒ El orden es 'How can I'"};
function initC(){
  const g=q('#sGrid');g.innerHTML='';
  Object.entries(SC).forEach(([ico,sc])=>{
    const b=document.createElement('div');b.className='sbtn';
    b.innerHTML='<div class="sico">'+ico+'</div><div class="snm">'+sc.n+'</div>';
    b.onclick=()=>startSc(ico,b);g.appendChild(b);
  });
}
function startSc(ico,btn){
  qa('.sbtn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');
  curSc=ico;curSt=0;
  const sc=SC[ico];q('#cAva').textContent=ico;q('#cName').textContent=sc.n;
  q('#cMsgs').innerHTML='';q('#cOpts').innerHTML='';
  botM(sc.s[0].b);showO(sc.s[0].o);
}
function botM(t){
  const m=q('#cMsgs'),d=document.createElement('div');
  d.className='cmsg bot';d.innerHTML='<div class="mbub">'+t+'</div>';
  m.appendChild(d);m.scrollTop=m.scrollHeight;
}
function usrM(t,cr){
  const m=q('#cMsgs'),d=document.createElement('div');
  d.className='cmsg usr';
  d.innerHTML='<div class="mbub">'+t+'</div>'+(cr?'<div class="mcorr">'+cr+'</div>':'');
  m.appendChild(d);m.scrollTop=m.scrollHeight;
}
function showO(opts){
  const el=q('#cOpts');el.innerHTML='';
  opts.forEach(o=>{const b=document.createElement('div');b.className='copt';b.textContent=o;b.onclick=()=>reply(o);el.appendChild(b)});
}
function reply(t){
  q('#cOpts').innerHTML='';
  let cr=null;for(const[p,tip] of Object.entries(BAD)){if(t.toLowerCase().includes(p)){cr=tip;break}}
  usrM(t,cr);
  if(curSc&&curSt<SC[curSc].s.length-1){
    curSt++;addXP(8,'Respuesta en conversaciÃ³n');
    setTimeout(()=>{const st=SC[curSc].s[curSt];botM(st.b);showO(st.o)},700);
  } else {
    addXP(20,'ConversaciÃ³n completada');
    setTimeout(()=>{botM('Great talking with you! You did very well! ğŸ‰');S.sessions++;sv();toast('ğŸ‰ Â¡ConversaciÃ³n completa! +20 XP','ok')},700);
  }
}
function sendC(){
  const inp=q('#cIn'),t=inp.value.trim();if(!t)return;inp.value='';
  let cr=null;for(const[p,tip] of Object.entries(BAD)){if(t.toLowerCase().includes(p)){cr=tip;break}}
  usrM(t,cr);addXP(5,'Mensaje enviado');
  const rs=["That's interesting! Tell me more.","I see! And what would you do?","Great! You're doing well with your English!","Understood! Is there anything else?"];
  setTimeout(()=>botM(rs[Math.floor(Math.random()*rs.length)]),700);
}
function resetC(){
  curSc=null;curSt=0;
  q('#cMsgs').innerHTML='<div class="estate"><div class="esico">ğŸ’¬</div><p>Selecciona un escenario para comenzar</p></div>';
  q('#cOpts').innerHTML='';qa('.sbtn').forEach(b=>b.classList.remove('active'));
}

// PROGRESS
function rPr(){
  stats();
  const g=q('#wGrd');g.innerHTML='';
  const td=new Date(),ts=td.toDateString();
  for(let i=6;i>=0;i--){
    const d=new Date(td);d.setDate(d.getDate()-i);const ds=d.toDateString();
    const b=document.createElement('div');
    b.className='dblk'+(ds===ts?' today':S.wa[ds]?' done':'');b.textContent=d.getDate();g.appendChild(b);
  }
  const row=q('#tRow');row.innerHTML='';
  TR.forEach(t=>{
    const e=(t.xp!==undefined&&S.xp>=t.xp)||(t.st!==undefined&&S.streak>=t.st)||(t.wd!==undefined&&S.words>=t.wd)||(t.ph!==undefined&&S.phrases>=t.ph);
    const d=document.createElement('div');d.className='troph'+(e?' earned':'');
    d.innerHTML='<div class="trico">'+(e?t.i:'ğŸ”’')+'</div><div class="trnm">'+t.n+'</div>';row.appendChild(d);
  });
}

// WELCOME
let wS=0;
const wH=[{e:'ğŸš€',t:'Bienvenido a BontiLand',s:'Tu plataforma personal para hablar inglÃ©s fluido'},{e:'ğŸ¯',t:'Â¿CuÃ¡l es tu meta?',s:'Elige lo que mÃ¡s te motiva'},{e:'â±ï¸',t:'Tu compromiso diario',s:'PequeÃ±os pasos crean grandes cambios'},{e:'ğŸ—ºï¸',t:'5 mÃ³dulos poderosos',s:'MetodologÃ­a cientÃ­fica de adquisiciÃ³n'},{e:'âœ¨',t:'Â¡Ya eres parte de BontiLand!',s:'Empieza hoy, habla maÃ±ana'}];
function buildD(){
  const el=q('#wdots');el.innerHTML='';
  for(let i=0;i<5;i++){const d=document.createElement('div');d.className='wdot'+(i===0?' on':'');d.style.width=i===0?'18px':'8px';el.appendChild(d)}
}
function syncD(){
  qa('.wdot').forEach((d,i)=>{d.classList.remove('on','dn');d.style.width='8px';if(i<wS)d.classList.add('dn');if(i===wS){d.classList.add('on');d.style.width='18px'}});
}
function wNext(){
  if(wS===0){const n=q('#wname').value.trim();if(n){S.userName=n;sv()}}
  wS++;
  if(wS>=5){finishW();return}
  const h=wH[wS];
  q('#wemo').textContent=h.e;q('#wtitle').textContent=h.t;q('#wsub').textContent=h.s;
  qa('.wstep').forEach((s,i)=>s.classList.toggle('active',i===wS));
  syncD();
  if(wS===4){
    q('#wready').textContent='Â¡Todo listo, '+(S.userName||'CampeÃ³n')+'! ğŸ‰';
    const nb=q('#wnext');nb.textContent='Â¡Empezar ahora! ğŸš€';nb.classList.add('fin');
    q('.wskip').style.visibility='hidden';
  }
}
function wGoal(el,g){qa('.wgoal').forEach(x=>x.classList.remove('sel'));el.classList.add('sel');S.goal=g;sv()}
function wTime(el,t){qa('.wtime').forEach(x=>x.classList.remove('sel'));el.classList.add('sel');S.daily=t;sv()}
function skipW(){S.done=true;sv();closeW()}
function finishW(){
  S.done=true;sv();doConf();
  setTimeout(()=>{closeW();addXP(25,'ğŸ Bono de bienvenida');toast('Â¡Bienvenido/a a BontiLand! ğŸš€','ok')},500);
}
function closeW(){const o=q('#wov');o.classList.add('hide');setTimeout(()=>o.remove(),380)}
function doConf(){
  const cs=['#6c63ff','#ff6584','#43e97b','#f7971e','#fff'];
  for(let i=0;i<50;i++){
    const p=document.createElement('div');p.className='conf';
    p.style.cssText='left:'+Math.random()*100+'vw;top:-10px;background:'+cs[Math.floor(Math.random()*cs.length)]+';width:'+(5+Math.random()*7)+'px;height:'+(5+Math.random()*7)+'px;animation-duration:'+(1.5+Math.random()*2)+'s;animation-delay:'+Math.random()*.4+'s;border-radius:'+(Math.random()>.5?'50%':'2px');
    document.body.appendChild(p);setTimeout(()=>p.remove(),3200);
  }
}
function initW(){if(S.done){q('#wov').remove();return}buildD()}

// INIT
initH();initC();rSn();initW();
const td=new Date().toDateString();
if(!S.wa[td]){S.wa[td]=true;S.streak=(S.streak||0)+1;sv();bars()}
</script>
</body>
</html>
